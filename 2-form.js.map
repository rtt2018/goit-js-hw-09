{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["//---------------------Глобальні змінні-----------------------------\nlet formData = { email: '', message: '' };\n\nconst key = 'feedback-form-state';\n\nconst emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n\nconst getForm = document.querySelector('.feedback-form');\n\n//------------------------Слухаємо input------------------------\n\ngetForm.addEventListener('input', saveAndrestoreData);\n\nfunction saveAndrestoreData(event) {\n  if (event.target.name === 'email') {\n    mailValidation(event);\n    formData.email = event.target.value.trim();\n  }\n  if (event.target.name === 'message') {\n    formData.message = event.target.value.trim();\n  }\n  localStorage.setItem(key, JSON.stringify(formData));\n}\n\n// --------------------Валідація мейлу-------------------------------\nfunction mailValidation(eventValidation) {\n  if (emailRegex.test(eventValidation.target.value.trim())) {\n    eventValidation.target.setCustomValidity('');\n  } else {\n    eventValidation.target.setCustomValidity(\n      'Введіть коректний email, наприклад usermail@mail.domen. Адреса має бути введена латиницею, містити символ @, після якого щонайменше 1 символ, потім . після якої щонайменше 2 символи'\n    );\n  }\n  eventValidation.target.reportValidity();\n}\n\n// ----------------Відновлення даних при переавантаженні-------------------\nwindow.addEventListener('load', restoreData);\n\nfunction restoreData() {\n  const getForm = document.querySelector('.feedback-form');\n  const savedData = localStorage.getItem(key);\n  if (savedData) {\n    formData = JSON.parse(savedData);\n    const { email, message } = formData;\n    getForm.elements.email.value = email;\n    getForm.elements.message.value = message;\n  }\n}\n\n//----------------Обробка субміту--------------------\n\ngetForm.addEventListener('submit', formSubmit);\n\nfunction formSubmit(event) {\n  event.preventDefault();\n\n  if (\n    event.target.elements.email.value.trim() === '' ||\n    event.target.elements.message.value.trim() === ''\n  ) {\n    alert(\"'All form fields must be filled in'\");\n    return;\n  }\n\n  if (emailRegex.test(event.target.elements.email.value.trim())) {\n    event.target.elements.email.setCustomValidity('');\n  } else {\n    event.target.elements.email.setCustomValidity(\n      'Введіть коректний email, наприклад usermail@mail.domen. Адреса має бути введена латиницею, містити символ @, після якого щонайменше 1 символ, потім . після якої щонайменше 2 символи'\n    );\n    return;\n  }\n\n  console.log(formData);\n\n  localStorage.removeItem(key);\n  event.target.reset();\n  formData.email = '';\n  formData.message = '';\n}\n"],"names":["formData","key","emailRegex","getForm","saveAndrestoreData","event","mailValidation","eventValidation","restoreData","savedData","email","message","formSubmit"],"mappings":"oCACA,IAAIA,EAAW,CAAE,MAAO,GAAI,QAAS,EAAE,EAEvC,MAAMC,EAAM,sBAENC,EAAa,mDAEbC,EAAU,SAAS,cAAc,gBAAgB,EAIvDA,EAAQ,iBAAiB,QAASC,CAAkB,EAEpD,SAASA,EAAmBC,EAAO,CAC7BA,EAAM,OAAO,OAAS,UACxBC,EAAeD,CAAK,EACpBL,EAAS,MAAQK,EAAM,OAAO,MAAM,KAAI,GAEtCA,EAAM,OAAO,OAAS,YACxBL,EAAS,QAAUK,EAAM,OAAO,MAAM,KAAI,GAE5C,aAAa,QAAQJ,EAAK,KAAK,UAAUD,CAAQ,CAAC,CACpD,CAGA,SAASM,EAAeC,EAAiB,CACnCL,EAAW,KAAKK,EAAgB,OAAO,MAAM,KAAI,CAAE,EACrDA,EAAgB,OAAO,kBAAkB,EAAE,EAE3CA,EAAgB,OAAO,kBACrB,uLACN,EAEEA,EAAgB,OAAO,gBACzB,CAGA,OAAO,iBAAiB,OAAQC,CAAW,EAE3C,SAASA,GAAc,CACrB,MAAML,EAAU,SAAS,cAAc,gBAAgB,EACjDM,EAAY,aAAa,QAAQR,CAAG,EAC1C,GAAIQ,EAAW,CACbT,EAAW,KAAK,MAAMS,CAAS,EAC/B,KAAM,CAAE,MAAAC,EAAO,QAAAC,CAAS,EAAGX,EAC3BG,EAAQ,SAAS,MAAM,MAAQO,EAC/BP,EAAQ,SAAS,QAAQ,MAAQQ,CAClC,CACH,CAIAR,EAAQ,iBAAiB,SAAUS,CAAU,EAE7C,SAASA,EAAWP,EAAO,CAGzB,GAFAA,EAAM,eAAc,EAGlBA,EAAM,OAAO,SAAS,MAAM,MAAM,KAAI,IAAO,IAC7CA,EAAM,OAAO,SAAS,QAAQ,MAAM,KAAI,IAAO,GAC/C,CACA,MAAM,qCAAqC,EAC3C,MACD,CAED,GAAIH,EAAW,KAAKG,EAAM,OAAO,SAAS,MAAM,MAAM,KAAI,CAAE,EAC1DA,EAAM,OAAO,SAAS,MAAM,kBAAkB,EAAE,MAC3C,CACLA,EAAM,OAAO,SAAS,MAAM,kBAC1B,uLACN,EACI,MACD,CAED,QAAQ,IAAIL,CAAQ,EAEpB,aAAa,WAAWC,CAAG,EAC3BI,EAAM,OAAO,QACbL,EAAS,MAAQ,GACjBA,EAAS,QAAU,EACrB"}